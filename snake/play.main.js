(function(){var c=[];var a="absolute";function d(e,i,h,g,f){this.x=e||0;this.y=i||0;this.width=h||20;this.height=g||20;this.color=f||"pink"}d.prototype.render=function(e){b();var f=document.createElement("div");e.appendChild(f);c.push(f);this.x=parseInt(Math.random()*e.offsetWidth/this.width)*this.width;this.y=parseInt(Math.random()*e.offsetHeight/this.height)*this.height;f.style.position=a;f.style.left=this.x+"px";f.style.top=this.y+"px";f.style.width=this.width+"px";f.style.height=this.height+"px";f.style.backgroundColor=this.color};function b(){var e=c.length-1;for(;e>=0;e--){c[e].parentNode.removeChild(c[e]);c.splice(e,1)}}window.Food=d})();(function(){var a="absolute";var c=[];function b(f,e,g){this.width=f||20;this.height=e||20;this.direction=g||"right";this.body=[{x:4,y:2,color:"#555"},{x:3,y:2,color:"red"},{x:2,y:2,color:"red"}]}b.prototype.render=function(g){d();for(var e=0;e<this.body.length;e++){var f=this.body[e];var h=document.createElement("div");g.appendChild(h);h.style.position=a;h.style.left=(f.x*this.width)+"px";h.style.top=(f.y*this.height)+"px";h.style.width=this.width+"px";h.style.height=this.height+"px";h.style.backgroundColor=f.color;c.push(h)}};b.prototype.move=function(h,k){var j=this.body[0].x*this.width;var g=this.body[0].y*this.height;for(var e=this.body.length-1;e>0;e--){this.body[e].x=this.body[e-1].x;this.body[e].y=this.body[e-1].y}switch(this.direction){case"right":this.body[0].x+=1;break;case"left":this.body[0].x-=1;break;case"top":this.body[0].y-=1;break;case"bottom":this.body[0].y+=1;break;default:break}if(j===k.x&&g===k.y){var f=this.body[this.body.length-1];this.body.push({x:f.x,y:f.y,color:f.color});k.render(h)}};function d(){var e=c.length-1;for(;e>=0;e--){c[e].parentNode.removeChild(c[e]);c.splice(e,1)}}window.Snake=b})();(function(){var c;function d(e){this.food=new Food();this.snake=new Snake();this.map=e;c=this}d.prototype.start=function(){this.food.render(this.map);this.snake.render(this.map);a();b()};function b(){var g=c.map.offsetWidth/c.snake.width;var e=c.map.offsetHeight/c.snake.height;var f=setInterval(function(){c.snake.move(c.map,c.food);c.snake.render(c.map);var h=c.snake.body;if(h[0].x<0||h[0].y<0||h[0].x>=g||h[0].y>=e){clearInterval(f);alert("Game over")}for(var i=1;i<=h.length-1;i++){if(h[0].x==h[i].x&&h[0].y==h[i].y){clearInterval(f);alert("Game over")}}},140)}function a(){document.addEventListener("keydown",function(g){var f=g.keyCode;var h=c.snake.direction;if(f==37&&h!="right"){c.snake.direction="left"}if(f==38&&h!="bottom"){c.snake.direction="top"}if(f==39&&h!="left"){c.snake.direction="right"}if(f==40&&h!="top"){c.snake.direction="bottom"}})}window.Game=d})();(function(){var b=document.getElementById("map");var a=new Game(b);a.start()})();